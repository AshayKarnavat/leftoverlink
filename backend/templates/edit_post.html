<!-- edit_post.html -->
{% extends "base.html" %}

{% block title %}Edit Post - Leftover Link{% endblock %}

{% block head %}
    
{% endblock %}

{% block content %}
    <h2>Edit Your Food Post</h2>
    <form method="POST" enctype="multipart-form-data" action="{{ url_for('edit_post', post_id=post.id) }}">
        <label for="food_name">Food Name:</label>
        <input type="text" id="food_name" name="food_name" required value="{{ post.food_name }}">

        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" required>{{ post.description }}</textarea>

        <label for="quantity">Quantity:</label>
        <input type="text" id="quantity" name="quantity" required value="{{ post.quantity }}">

        <label for="phone_number">Contact Phone Number:</label>
        <input type="tel" id="phone_number" name="phone_number" required value="{{ post.phone_number }}">

        <label for="image">Upload New Photo (optional):</label>
        <p>Current image:</p>
        <img src="{{ post.image_url }}" width="150" style="border-radius: 4px;">
        <input type="file" id="image" name="image" accept="image/*">

        <label>Drag the pin to update the pickup location:</label>
        <div id="map" data-api-key="{{ GOOGLE_API_KEY }}" style="height: 300px; width: 100%; border: 1px solid #ccc; margin-top: 10px;"></div>
        <br>

        <input type="hidden" id="lat" name="lat" value="{{ post.lat }}">
        <input type="hidden" id="lon" name="lon" value="{{ post.lon }}">
        <input type="text" id="city" name="city" readonly required value="{{ post.city }}">

        <button type="submit">Save Changes</button>
    </form>

    <script>
        const initialCoords = {{ {'lat': post.lat, 'lon': post.lon}|tojson }};
    </script>
{% endblock %}